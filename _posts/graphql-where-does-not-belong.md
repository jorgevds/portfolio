---
title: "Home Away from Home: GraphQL Where It Doesn't Belong - Part One"
excerpt: "Hook to attract readers"
coverImage:
    src: "/blog/emoji/emoji-magic.png"
    width: "1260"
    height: "256"
date: "2023-03-16"
---

There comes a time when a young software writer is primed and ready. Where they hike up to the edge of the cliff, the top of the mountain, armed to the teeth with _knowledge_. Teeth full of grit and sand. The sand of experience. And they take that plunge: the plunge of creative control. And they are taken up by the hands of angels, their song bouncing inner ear to inner ear. And they are lifted up into the heavens of the newest, the latest, mayhaps the greatest, the techiest of tech that no money can buy <span style="font-size:10px;">(open source)</span>. And they are... free.

That time is not now.

Most of the time, us writers are presented with a very strict set of boundaries. A playpen of other people's making. And many times, often, these boundaries were set by people who don't know the lower levels of making all the sand play nicely together. I'm not sure where I'm going with this sandbox analogy.

To the point, in a professional setting I was recently tasked with blending the UI capabilities of the Angular framework with the network capabilities of GraphQL.

### Match Made in Hell

At this time, I was quite the budding novice in the Angular framework. But even then I immediately raised concerns. Should we really be using a more functionally oriented, on-the-fly, cool kid querying protocol with an OOP-inspired, stuffy, nerd UI framework like Angular? Don't you realize my reputation as an international rockstar could very well be threatened here? Never mind the arbitrary contrasts I'm drumming up here; is GraphQL Angular even a _thing_? What about the HttpModule that Angular provides? What about RxJS Observables?

Anyone familiar with the Angular framework--first off, understands that I'm talking about what is lovingly referred to as "Angular 2" by the community, not Angular.js, which nobody ever seems to call _Angular 1_--understands just how weird a combination this really is. For those who don't,

### Rolling with the Punches

limited abilities
foregoing an integral part of the angular toolkit
barebones implementations around online
only one gql client

### Code Generation

heavens open up slightly and angel piss streams down onto my face
code generation: delightfully devilish but more like a jack in the box
clunky setup, scatterbrained documentation
ultimately getting the job done

### Rolling with the Kicks

Code gen setup works reasonably well
problem with types being autogenerated
its greatest strength turned fatal flaw
There Has to Be a Better Way

### GraphQL Middleware

heavens did sing
turning the auto back into horse and carriage: manually creating and maintaining a huge array of data types
ability to add extra functionality
blackboxing networking so the UI can stay dumb as bricks

<!-- Generated into property -->
<div class="mermaid">
classDiagram
    APIDowntimesPaginatedQueryService --* DowntimesPropertyService : Composition
    APIFilteredDowntimesQueryService --* DowntimesPropertyService : Composition
    DowntimesPropertyService <.. LibOrApp : Dependency
    class APIDowntimesPaginatedQueryService{
        // Generated service
        +watch(): ApolloQueryResult~APIDowntimesPaginatedQuery~
    }
    class APIFilteredDowntimesQueryService{
        // Generated service
        +watch(): ApolloQueryResult~APIDowntimesFilteredQuery~
    }
    class DowntimesPropertyService{
        +getPaginatedDowntimes(): Observable~Downtime~
        +getFilteredDowntimes(): Observable~Downtime~
    }
    class LibOrApp{
        // library or application that consumes data
        +consume(): Observable~Downtime~
    }
</div>

<!-- Middleware -->
<div class="mermaid">
classDiagram
    APIDowntimesPaginatedQueryService --* DowntimesPropertyService : Composition
    DowntimesPropertyService ..|> Downtime : Instantiates
    DowntimesPropertyService <.. LibOrApp : Dependency
    class APIDowntimesPaginatedQueryService{
        // Generated service
        +fetch(): ApolloQueryResult~APIDowntimesPaginatedQuery~
    }
    class DowntimesPropertyService{
        +getPaginatedDowntimes(): Observable~Downtime~
    }
    class Downtime{
        // Class
        +pageInfo: PaginationInfo
        +...
        +constructor()
        -initialize()
    }
    class LibOrApp{
        +consume(): Observable~Downtime~
    }
</div>
